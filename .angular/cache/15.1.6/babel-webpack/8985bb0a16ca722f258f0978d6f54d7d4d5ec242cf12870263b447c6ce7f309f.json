{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { CustomValidators } from '../custom-validators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/services/user-data.service\";\nimport * as i4 from \"../services/role.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction RegisterComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35)(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\nfunction RegisterComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h6\", 36);\n    i0.ɵɵtext(2, \" Name is required\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RegisterComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h6\", 37);\n    i0.ɵɵtext(2, \" Email is required\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h6\", 38);\n    i0.ɵɵtext(4, \" Invalid email\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RegisterComponent_div_26_h6_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h6\", 41);\n    i0.ɵɵtext(1, \"*password must be at least 3 char\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegisterComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h6\", 39);\n    i0.ɵɵtext(2, \" password is required\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, RegisterComponent_div_26_h6_3_Template, 2, 0, \"h6\", 40);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.registerForm.controls[\"password\"].hasError(\"minLength\"));\n  }\n}\nfunction RegisterComponent_div_31_h6_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h6\", 41);\n    i0.ɵɵtext(1, \"*password mismatch\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegisterComponent_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h6\", 42);\n    i0.ɵɵtext(2, \" confirm password is required\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, RegisterComponent_div_31_h6_3_Template, 2, 0, \"h6\", 40);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.registerForm.controls[\"password_confirmation\"].hasError(\"minLength\"));\n  }\n}\nfunction RegisterComponent_div_45_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"confirm Passwordis required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegisterComponent_div_45_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43);\n    i0.ɵɵtemplate(1, RegisterComponent_div_45_p_1_Template, 2, 0, \"p\", 15);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.registerForm.controls[\"confirmPassword\"].hasError(\"required\"));\n  }\n}\nfunction RegisterComponent_p_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \" password mismatch\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class RegisterComponent {\n  constructor(authService, router, userDataService, roleService) {\n    this.authService = authService;\n    this.router = router;\n    this.userDataService = userDataService;\n    this.roleService = roleService;\n    this.error = \"\";\n    this.customValidators = new CustomValidators();\n    this.registerForm = new FormGroup({\n      name: new FormControl(null, [Validators.required]),\n      role_id: new FormControl(JSON.parse(localStorage.getItem('checkRole') || \"\"), [Validators.required]),\n      email: new FormControl(null, [Validators.required, Validators.email]),\n      password: new FormControl(null, [Validators.required, Validators.minLength(8)]),\n      password_confirmation: new FormControl(null, [Validators.required])\n    }, {\n      validators: this.customValidators.passwordMatch\n    });\n  }\n  ngOnInit() {\n    console.log(localStorage.getItem('chekRole'));\n  }\n  submitRegisterForm(registerForm) {\n    console.log(registerForm.value);\n    if (registerForm.valid) {\n      localStorage.setItem('chekRole', '1');\n      this.authService.register(registerForm.value).subscribe(response => {\n        // console.log(registerForm.value)\n        console.log(response);\n        if (response.message == \"success\") {\n          //go to login\n          console.log(response);\n          localStorage.setItem('token', response.token);\n          localStorage.setItem('user', JSON.stringify(response.data));\n          this.authService.token();\n          this.userDataService.token();\n          this.userDataService.userData();\n          this.router.navigate(['/home']);\n          // this.router.navigate(['/login'])\n        } else {\n          console.log(response);\n          this.error = response.message;\n        }\n      });\n    }\n  }\n}\nRegisterComponent.ɵfac = function RegisterComponent_Factory(t) {\n  return new (t || RegisterComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.UserDataService), i0.ɵɵdirectiveInject(i4.RoleService));\n};\nRegisterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RegisterComponent,\n  selectors: [[\"app-register\"]],\n  decls: 50,\n  vars: 10,\n  consts: [[1, \"vh-100\", 2, \"background-color\", \"#eee\"], [1, \"container\", \"h-100\"], [1, \"row\", \"d-flex\", \"justify-content-center\", \"align-items-center\", \"h-100\"], [1, \"col-lg-12\", \"col-xl-11\"], [1, \"card\", \"text-black\", 2, \"border-radius\", \"25px\"], [1, \"card-body\", \"p-md-5\"], [1, \"row\", \"justify-content-center\"], [1, \"col-md-10\", \"col-lg-6\", \"col-xl-5\", \"order-2\", \"order-lg-1\"], [1, \"text-center\", \"h1\", \"fw-bold\", \"mb-5\", \"mx-1\", \"mx-md-4\", \"mt-4\", 2, \"color\", \"#3566b6\"], [\"class\", \"alert alert-danger m-2\", 4, \"ngIf\"], [1, \"mx-1\", \"mx-md-4\", 3, \"formGroup\", \"ngSubmit\"], [1, \"d-flex\", \"flex-row\", \"align-items-center\", \"mb-4\"], [1, \"fas\", \"fa-user\", \"fa-lg\", \"me-3\", \"fa-fw\"], [1, \"form-outline\", \"flex-fill\", \"mb-0\"], [\"type\", \"text\", \"id\", \"form3Example1c\", \"formControlName\", \"name\", \"placeholder\", \"Your Name\", 1, \"form-control\"], [4, \"ngIf\"], [1, \"fas\", \"fa-envelope\", \"fa-lg\", \"me-3\", \"fa-fw\"], [\"type\", \"email\", \"id\", \"form3Example3c\", \"formControlName\", \"email\", \"placeholder\", \"Your Email\", 1, \"form-control\"], [1, \"fas\", \"fa-lock\", \"fa-lg\", \"me-3\", \"fa-fw\"], [\"type\", \"password\", \"id\", \"form3Example4c\", \"formControlName\", \"password\", \"placeholder\", \"Password\", 1, \"form-control\"], [1, \"fas\", \"fa-key\", \"fa-lg\", \"me-3\", \"fa-fw\"], [\"type\", \"password\", \"id\", \"form3Example4cd\", \"placeholder\", \"Repeat your password\", \"formControlName\", \"password_confirmation\", 1, \"form-control\"], [1, \"form-check\", \"d-flex\", \"justify-content-start\", \"mb-5\"], [\"type\", \"checkbox\", \"value\", \"\", \"id\", \"form2Example3c\", 1, \"form-check-input\", \"me-2\", 2, \"width\", \"30px\"], [\"for\", \"form2Example3\", 1, \"form-check-label\"], [1, \"d-flex\", \"justify-content-center\", \"mx-4\", \"mb-3\", \"mb-lg-4\"], [1, \"btn\", \"btn-primary\", \"btn-lg\", 2, \"background-color\", \"#3566b6\", 3, \"disabled\"], [1, \"col-md-10\", \"col-lg-6\", \"col-xl-7\", \"d-flex\", \"align-items-center\", \"order-1\", \"order-lg-2\"], [\"src\", \"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-registration/draw1.webp\", \"alt\", \"Sample image\", 1, \"img-fluid\"], [1, \"mb-3\"], [\"for\", \"exampleFormControlInput1\", 1, \"form-label\"], [\"type\", \"password\", \"id\", \"exampleFormControlInput1\", \"formControlName\", \"confirmPassword\", 1, \"form-control\"], [\"class\", \"alert alert-danger mt-2\", 4, \"ngIf\"], [1, \"mb-3\", \"text-center\"], [1, \"btn\", \"btn-light\", \"px-5\", 3, \"disabled\"], [1, \"alert\", \"alert-danger\", \"m-2\"], [\"ngIf\", \"registerForm.controls['name'].hasError('required')\", 1, \"text-danger\", \"mt-2\"], [\"ngIf\", \"registerForm.controls['email'].hasError('required')\", 1, \"text-danger\", \"mt-2\"], [\"ngIf\", \"registerForm.controls['email'].hasError('email')\", 1, \"text-danger\", \"mt-2\"], [\"ngIf\", \"registerForm.controls['password'].hasError('required')\", 1, \"text-danger\", \"mt-2\"], [\"class\", \"text-danger  mt-2\", 4, \"ngIf\"], [1, \"text-danger\", \"mt-2\"], [\"ngIf\", \"registerForm.controls['password_confirmation'].hasError('required')\", 1, \"text-danger\", \"mt-2\"], [1, \"alert\", \"alert-danger\", \"mt-2\"]],\n  template: function RegisterComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"div\", 6)(7, \"div\", 7)(8, \"p\", 8);\n      i0.ɵɵtext(9, \"Sign up\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(10, RegisterComponent_div_10_Template, 3, 1, \"div\", 9);\n      i0.ɵɵelementStart(11, \"form\", 10);\n      i0.ɵɵlistener(\"ngSubmit\", function RegisterComponent_Template_form_ngSubmit_11_listener() {\n        return ctx.submitRegisterForm(ctx.registerForm);\n      });\n      i0.ɵɵelementStart(12, \"div\", 11);\n      i0.ɵɵelement(13, \"i\", 12);\n      i0.ɵɵelementStart(14, \"div\", 13);\n      i0.ɵɵelement(15, \"input\", 14);\n      i0.ɵɵtemplate(16, RegisterComponent_div_16_Template, 3, 0, \"div\", 15);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(17, \"div\", 11);\n      i0.ɵɵelement(18, \"i\", 16);\n      i0.ɵɵelementStart(19, \"div\", 13);\n      i0.ɵɵelement(20, \"input\", 17);\n      i0.ɵɵtemplate(21, RegisterComponent_div_21_Template, 5, 0, \"div\", 15);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(22, \"div\", 11);\n      i0.ɵɵelement(23, \"i\", 18);\n      i0.ɵɵelementStart(24, \"div\", 13);\n      i0.ɵɵelement(25, \"input\", 19);\n      i0.ɵɵtemplate(26, RegisterComponent_div_26_Template, 4, 1, \"div\", 15);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(27, \"div\", 11);\n      i0.ɵɵelement(28, \"i\", 20);\n      i0.ɵɵelementStart(29, \"div\", 13);\n      i0.ɵɵelement(30, \"input\", 21);\n      i0.ɵɵtemplate(31, RegisterComponent_div_31_Template, 4, 1, \"div\", 15);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(32, \"div\", 22);\n      i0.ɵɵelement(33, \"input\", 23);\n      i0.ɵɵelementStart(34, \"label\", 24);\n      i0.ɵɵtext(35, \" I agree all statements in Terms of service \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(36, \"div\", 25)(37, \"button\", 26);\n      i0.ɵɵtext(38, \"Register\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(39, \"div\", 27);\n      i0.ɵɵelement(40, \"img\", 28);\n      i0.ɵɵelementEnd()()()()()()();\n      i0.ɵɵelementStart(41, \"div\", 29)(42, \"label\", 30);\n      i0.ɵɵtext(43, \"Confirm Password \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(44, \"input\", 31);\n      i0.ɵɵtemplate(45, RegisterComponent_div_45_Template, 2, 1, \"div\", 32);\n      i0.ɵɵtemplate(46, RegisterComponent_p_46_Template, 2, 0, \"p\", 15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(47, \"div\", 33)(48, \"button\", 34);\n      i0.ɵɵtext(49, \"Register \");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      let tmp_2_0;\n      let tmp_3_0;\n      let tmp_4_0;\n      let tmp_5_0;\n      let tmp_7_0;\n      let tmp_8_0;\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngIf\", ctx.error);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.registerForm);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx.registerForm.get(\"name\")) == null ? null : tmp_2_0.errors) != null && ((tmp_2_0 = ctx.registerForm.get(\"name\")) == null ? null : tmp_2_0.touched));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx.registerForm.get(\"email\")) == null ? null : tmp_3_0.errors) != null && ((tmp_3_0 = ctx.registerForm.get(\"email\")) == null ? null : tmp_3_0.touched));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_4_0 = ctx.registerForm.get(\"password\")) == null ? null : tmp_4_0.errors) != null && ((tmp_4_0 = ctx.registerForm.get(\"password\")) == null ? null : tmp_4_0.touched));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_5_0 = ctx.registerForm.get(\"password_confirmation\")) == null ? null : tmp_5_0.errors) != null && ((tmp_5_0 = ctx.registerForm.get(\"password_confirmation\")) == null ? null : tmp_5_0.touched));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"disabled\", ctx.registerForm.invalid);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_7_0 = ctx.registerForm.get(\"confirmPassword\")) == null ? null : tmp_7_0.errors) != null && ((tmp_7_0 = ctx.registerForm.get(\"confirmPassword\")) == null ? null : tmp_7_0.touched));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (ctx.registerForm.errors == null ? null : ctx.registerForm.errors[\"UnmatchedPassword\"]) !== null && ((tmp_8_0 = ctx.registerForm.get(\"confirmPassword\")) == null ? null : tmp_8_0.touched));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", ctx.registerForm.invalid);\n    }\n  },\n  dependencies: [i5.NgIf, i6.ɵNgNoValidate, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.FormGroupDirective, i6.FormControlName],\n  styles: [\".select[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n    background-color: white;\\r\\n    height: 35px;\\r\\n  }\\r\\n\\r\\n  input[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n    height: 35px;\\r\\n  }\\r\\n\\r\\n  i[_ngcontent-%COMP%] {\\r\\n    margin-bottom: 10px;\\r\\n  }\\r\\n\\r\\n  .btn[_ngcontent-%COMP%]:hover {\\r\\n    background-color: white !important;\\r\\n    color: #3566b6;\\r\\n  }\\r\\n\\r\\n  img[_ngcontent-%COMP%] {\\r\\n    position: relative;\\r\\n    animation: _ngcontent-%COMP%_up-and-down 5s linear infinite;\\r\\n  }\\r\\n\\r\\n  \\r\\n  @keyframes _ngcontent-%COMP%_up-and-down {\\r\\n\\r\\n    0%,\\r\\n    100% {\\r\\n      top: 0;\\r\\n    }\\r\\n\\r\\n    50% {\\r\\n      top: -50px;\\r\\n    }\\r\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYXV0aC9yZWdpc3Rlci9yZWdpc3Rlci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksV0FBVztJQUNYLHVCQUF1QjtJQUN2QixZQUFZO0VBQ2Q7O0VBRUE7SUFDRSxXQUFXO0lBQ1gsWUFBWTtFQUNkOztFQUVBO0lBQ0UsbUJBQW1CO0VBQ3JCOztFQUVBO0lBQ0Usa0NBQWtDO0lBQ2xDLGNBQWM7RUFDaEI7O0VBRUE7SUFDRSxrQkFBa0I7SUFDbEIseUNBQXlDO0VBQzNDOztFQUVBLHFCQUFxQjtFQUNyQjs7SUFFRTs7TUFFRSxNQUFNO0lBQ1I7O0lBRUE7TUFDRSxVQUFVO0lBQ1o7RUFDRiIsInNvdXJjZXNDb250ZW50IjpbIi5zZWxlY3Qge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgIGhlaWdodDogMzVweDtcclxuICB9XHJcblxyXG4gIGlucHV0IHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiAzNXB4O1xyXG4gIH1cclxuXHJcbiAgaSB7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG4gIH1cclxuXHJcbiAgLmJ0bjpob3ZlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xyXG4gICAgY29sb3I6ICMzNTY2YjY7XHJcbiAgfVxyXG5cclxuICBpbWcge1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgYW5pbWF0aW9uOiB1cC1hbmQtZG93biA1cyBsaW5lYXIgaW5maW5pdGU7XHJcbiAgfVxyXG5cclxuICAvKiBzdGFydCBhbmFpbWF0aW9uICovXHJcbiAgQGtleWZyYW1lcyB1cC1hbmQtZG93biB7XHJcblxyXG4gICAgMCUsXHJcbiAgICAxMDAlIHtcclxuICAgICAgdG9wOiAwO1xyXG4gICAgfVxyXG5cclxuICAgIDUwJSB7XHJcbiAgICAgIHRvcDogLTUwcHg7XHJcbiAgICB9XHJcbiAgfSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","FormGroup","Validators","CustomValidators","i0","RegisterComponent","constructor","authService","router","userDataService","roleService","name","required","role_id","JSON","parse","localStorage","getItem","email","password","minLength","password_confirmation","validators","customValidators","passwordMatch","ngOnInit","console","log","submitRegisterForm","registerForm","value","valid","setItem","register","subscribe","response","message","token","stringify","data","userData","navigate","error","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\lenovo\\Desktop\\new\\Final-Project-Front-End\\src\\app\\auth\\register\\register.component.ts","C:\\Users\\lenovo\\Desktop\\new\\Final-Project-Front-End\\src\\app\\auth\\register\\register.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { UserDataService } from 'src/app/services/user-data.service';\r\nimport { AuthService } from '../auth.service';\r\nimport { CustomValidators } from '../custom-validators';\r\nimport { RoleService } from '../services/role.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-register',\r\n  templateUrl: './register.component.html',\r\n  styleUrls: ['./register.component.css']\r\n})\r\nexport class RegisterComponent implements OnInit {\r\n\r\n  error: string = \"\"\r\n  private customValidators = new CustomValidators();\r\n  registerForm: FormGroup = new FormGroup({\r\n    name: new FormControl(null, [Validators.required]),\r\n    role_id: new FormControl(JSON.parse(localStorage.getItem('checkRole')||\"\"), [Validators.required]),\r\n\r\n    email: new FormControl(null, [Validators.required, Validators.email]),\r\n\r\n    password: new FormControl(null, [Validators.required,Validators.minLength(8)]),\r\n    password_confirmation: new FormControl(null, [Validators.required]),\r\n  },\r\n\r\n    { validators: this.customValidators.passwordMatch }\r\n\r\n  )\r\n\r\n  constructor(private authService: AuthService, private router: Router,private userDataService:UserDataService\r\n    ,private roleService:RoleService) { }\r\n  ngOnInit(): void {\r\nconsole.log(localStorage.getItem('chekRole'))\r\n\r\n  }\r\n\r\n  submitRegisterForm(registerForm: FormGroup) {\r\n    console.log(registerForm.value)\r\n\r\n    if (registerForm.valid) {\r\n      localStorage.setItem('chekRole','1');\r\n      this.authService.register(registerForm.value).subscribe((response) => {\r\n        // console.log(registerForm.value)\r\n        console.log(response)\r\n        if (response.message == \"success\") {\r\n          //go to login\r\n          console.log(response)\r\n          localStorage.setItem('token', response.token)\r\n          localStorage.setItem('user', JSON.stringify(response.data))\r\n          this.authService.token();\r\n          this.userDataService.token();\r\n          this.userDataService.userData()\r\n        \r\n          this.router.navigate(['/home'])\r\n\r\n          // this.router.navigate(['/login'])\r\n        } else {\r\n          console.log(response)\r\n          this.error = response.message\r\n        }\r\n\r\n      }\r\n      )\r\n\r\n    }\r\n  }\r\n}","<section class=\"vh-100\" style=\"background-color: #eee;\">\r\n  <div class=\"container h-100\">\r\n    <div class=\"row d-flex justify-content-center align-items-center h-100\">\r\n      <div class=\"col-lg-12 col-xl-11\">\r\n        <div class=\"card text-black\" style=\"border-radius: 25px;\">\r\n          <div class=\"card-body p-md-5\">\r\n            <div class=\"row justify-content-center\">\r\n              <div class=\"col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1\">\r\n                <p class=\"text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4\" style=\"color: #3566b6;\">Sign up</p>\r\n                <div class=\"alert alert-danger m-2\" *ngIf=\"error\">\r\n                  <p>{{error}}</p>\r\n                </div>\r\n                <form class=\"mx-1 mx-md-4\" [formGroup]=\"registerForm\" (ngSubmit)=\"submitRegisterForm(registerForm)\">\r\n                  <div class=\"d-flex flex-row align-items-center mb-4\">\r\n                    <i class=\"fas fa-user fa-lg me-3 fa-fw\"></i>\r\n                    <div class=\"form-outline flex-fill mb-0\">\r\n                      <input type=\"text\" id=\"form3Example1c\" class=\"form-control\" formControlName=\"name\"\r\n                        placeholder=\"Your Name\" />\r\n                        <div  *ngIf=\"registerForm.get('name')?.errors!= null && registerForm.get('name')?.touched\">\r\n                          <h6 class=\"text-danger  mt-2\" ngIf=\"registerForm.controls['name'].hasError('required')\"> Name is required</h6>   \r\n                        </div>\r\n                    </div>\r\n                   \r\n                  </div>\r\n                  <div class=\"d-flex flex-row align-items-center mb-4\">\r\n                    <i class=\"fas fa-envelope fa-lg me-3 fa-fw\"></i>\r\n                    <div class=\"form-outline flex-fill mb-0\">\r\n                      <input type=\"email\" id=\"form3Example3c\" class=\"form-control\" formControlName=\"email\" placeholder=\"Your Email\" />\r\n                      \r\n                      <div  *ngIf=\"registerForm.get('email')?.errors!= null && registerForm.get('email')?.touched\">\r\n                        <h6 class=\"text-danger  mt-2\" ngIf=\"registerForm.controls['email'].hasError('required')\"> Email is required</h6> \r\n                        <h6 class=\"text-danger  mt-2\" ngIf=\"registerForm.controls['email'].hasError('email')\"> Invalid email</h6>   \r\n                      </div>\r\n\r\n                    </div>\r\n                  \r\n                  </div>\r\n                  <div class=\"d-flex flex-row align-items-center mb-4\">\r\n                    <i class=\"fas fa-lock fa-lg me-3 fa-fw\"></i>\r\n                    <div class=\"form-outline flex-fill mb-0\">\r\n                      <input type=\"password\" id=\"form3Example4c\" formControlName=\"password\" class=\"form-control\" placeholder=\"Password\" />\r\n                      <div  *ngIf=\"registerForm.get('password')?.errors!= null && registerForm.get('password')?.touched\">\r\n                        <h6 class=\"text-danger  mt-2\" ngIf=\"registerForm.controls['password'].hasError('required')\"> password is required</h6> \r\n                        <h6 class=\"text-danger  mt-2\" *ngIf=\"registerForm.controls['password'].hasError('minLength')\">*password must be at least 3 char</h6>   \r\n                      </div>\r\n                    </div>\r\n                   \r\n                  </div>\r\n                  <div class=\"d-flex flex-row align-items-center mb-4\">\r\n                    <i class=\"fas fa-key fa-lg me-3 fa-fw\"></i>\r\n                    <div class=\"form-outline flex-fill mb-0\">\r\n                      \r\n                      <input type=\"password\" id=\"form3Example4cd\" class=\"form-control\"\r\n                        placeholder=\"Repeat your password\" formControlName=\"password_confirmation\" />\r\n                        <div  *ngIf=\"registerForm.get('password_confirmation')?.errors!= null && registerForm.get('password_confirmation')?.touched\">\r\n                          <h6 class=\"text-danger  mt-2\" ngIf=\"registerForm.controls['password_confirmation'].hasError('required')\"> confirm password is required</h6> \r\n                          <h6 class=\"text-danger  mt-2\" *ngIf=\"registerForm.controls['password_confirmation'].hasError('minLength')\">*password mismatch</h6>   \r\n                        </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"form-check d-flex justify-content-start mb-5\">\r\n                    <input class=\"form-check-input me-2 \" style=\"width:30px\" type=\"checkbox\" value=\"\"\r\n                      id=\"form2Example3c\" />\r\n                    <label class=\"form-check-label\" for=\"form2Example3\">\r\n                      I agree all statements in Terms of service\r\n                    </label>\r\n                  </div>\r\n                  <div class=\"d-flex justify-content-center mx-4 mb-3 mb-lg-4\">\r\n                    <button class=\"btn btn-primary btn-lg\"\r\n                      style=\"background-color: #3566b6 ;\" [disabled]=\"registerForm.invalid\">Register</button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n              <div class=\"col-md-10 col-lg-6 col-xl-7 d-flex align-items-center order-1 order-lg-2\">\r\n                <img src=\"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-registration/draw1.webp\"\r\n                  class=\"img-fluid\" alt=\"Sample image\">\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"mb-3\">\r\n    <label for=\"exampleFormControlInput1\" class=\"form-label\">Confirm Password </label>\r\n    <input type=\"password\" class=\"form-control\" id=\"exampleFormControlInput1\" formControlName=\"confirmPassword\">\r\n    <div class=\"alert alert-danger mt-2\" *ngIf=\"registerForm.get('confirmPassword')?.errors!= null && registerForm.get('confirmPassword')?.touched\">\r\n      <p *ngIf=\"registerForm.controls['confirmPassword'].hasError('required')\">confirm Passwordis required</p>\r\n   </div>\r\n\r\n   <p *ngIf=\"registerForm.errors?.['UnmatchedPassword']!==null  && registerForm.get('confirmPassword')?.touched \"> password mismatch</p>\r\n    </div>\r\n  <div class=\"mb-3  text-center\">\r\n    <button  class=\"btn btn-light px-5\"  [disabled]=\"registerForm.invalid\">Register </button>\r\n  </div>\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}